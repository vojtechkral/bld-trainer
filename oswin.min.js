// Oswin 0.1 (ee4af9e520b5ecaabbeb7e238c51f2dd2c470f82)
(function(p,t){"function"===typeof define&&define.amd?define(["jquery"],t):p.oswin=t(jQuery)})(this,function(p){if(!function(){if(Object.defineProperty)try{return Object.defineProperty({},"prop",{}),!0}catch(c){return!1}else return!1}())return console.error("Oswin: defineProperty required. (IE <= 8 is not supported.)"),!1;p={};var t={};(function(c,a,k,h){function l(b,d){for(var f=this.priv.events!==h?this.priv.events:this.priv.events={},g=b.split(/\s+/),e=0,c=g.length;e<c;e++){var n=g[e];n in f||
(f[n]=[]);-1===a.indexOf(f[n],d)&&f[n].push(d)}return this}function y(b,d){var f=function(){this.off(b,f);d.apply(this,Array.prototype.slice.call(arguments))};this.on(b,f);return this}function m(b,d){var f=this.priv.events;if(f===h)return this;for(var g=b.split(/\s+/),e=0,c=g.length;e<c;e++){var n=g[e];if(n in f){var r=d?a.indexOf(f[n],d):0;-1!==r&&f[n].splice(r,1)}}return this}function g(b){var d=this.priv.events;if(d===h||!1===b in d)return this;for(var f=Array.prototype.slice.call(arguments,1),
a=d[b].length-1;0<=a;a--)d[b][a].apply(this,f);return this}function n(){}function e(b,d,f){for(var a=Object.keys(b),g=0,k=a.length;g<k;g++){var h=a[g],r=c.isNonArrayObject(b[h]),v=f(b,h,r,d);!r||v instanceof n||e(b[h],v,f)}}a.inherit=function(b,d){b.prototype=Object.create(d.prototype);b.prototype.constructor=b};a.defProp=function(b,d,f,a,g,e){Object.defineProperty(b,d,{configurable:f,enumerable:a,get:g,set:e})};a.defPrivate=function(b,d){a.defProp(b,"priv",!1,!1,function(){return d})};a.uniqueID=
function(b){return(b?b:"")+Math.floor(1E5*Math.random()).toString(36)+Date.now().toString(36)};a.indexOf=function(b,d){if(Array.prototype.indexOf&&b.indexOf===Array.prototype.indexOf)return b.indexOf(d);for(var f=0,a=b.length;f<a;f++)if(b[f]===d)return f;return-1};a.asEvented=function(b){b.on=l;b.off=m;b.trigger=g;b.once=y};c.argsSubstitute=function(b,d){for(var f=b,a=0,g=d.length;a<g;a++)f=f.replace(":"+a,d[a]);return f};c.isArrayLike=function(b){return"object"===typeof b&&"length"in b&&"number"===
typeof b.length&&"splice"in b&&"function"===typeof b.splice};c.isNonArrayObject=function(b){return"object"===typeof b&&!c.isArrayLike(b)};c.dotResolve=function(b,d){for(var f=d.split("."),a=!0,g=0;g<f.length-1;g++)if("object"===typeof b[f[g]]||"function"===typeof b[f[g]])b=b[f[g]];else{a=!1;break}return{parent:b,result:a?b[f[f.length-1]]:h}};c.haveLocalStorage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(b){return!1}};c.dfs=function(b,d,f){if(c.isNonArrayObject(b))e(b,
d,f);else throw"oswin.dfs(): Invalid argument: not an object or an array-like object";};c.dfs.cut=function(){return new n};c.filterUnderscore=function(b){c.dfs(b,!1,function(b,f,a){if("_"==f[0]&&(delete b[f],a))return c.dfs.cut()});return b}})(p,t,jQuery);(function(c,a,k,h){a.Snippet=function(){this.p1=this.p2=!1;this.args=[]};a.Parser=function(a,c,g){this.name=a;this.p1re=c;this.p2re=g;this.current=this.attr_orig=this.attr=!1;this.result=[]};a.Parser.prototype.error=function(){throw"Oswin: Invalid "+
this.name+" syntax: '"+this.attr_orig+"'";};a.Parser.prototype.parse_p1=function(){var a=this.p1re.exec(this.attr);null===a&&this.error();this.attr=this.attr.slice(a[0].length);this.current.p1=a[1]};a.Parser.prototype.parse_p2=function(){if("/"!=this.attr[0])return!1;this.attr=this.attr.slice(1);match=this.p2re.exec(this.attr);null===match&&this.error();this.attr=this.attr.slice(match[0].length);this.current.p2=match[1];return!0};a.Parser.prototype.parse_args=function(){if("("==this.attr[0]){var a,
c=!1;for(a=1;a<this.attr.length&&(c||")"!=this.attr[a]);a++)'"'==this.attr[a]&&(c=c?"\\"==this.attr[a]:!0);a>=this.attr.length&&this.error();c="["+this.attr.slice(1,a)+"]";this.attr=this.attr.slice(a+1);try{c=JSON.parse(c)}catch(g){this.error()}this.current.args=c}};a.Parser.prototype.check_next=function(){if(0==this.attr.length)return!1;if(","==this.attr[0])return this.attr=this.attr.replace(/^,\s*/,""),!0;this.error()};a.Parser.prototype.parse_one=function(){this.current=new a.Snippet;this.parse_p1();
this.parse_p2()&&this.parse_args();this.result.push(this.current)};a.Parser.prototype.parse=function(a){this.attr_orig=this.attr=a;this.current=!1;for(this.result=[];this.parse_one(),this.check_next(););return this.result};var l=/^([_$a-zA-Z\xA0-\uFFFF][._$a-zA-Z0-9\xA0-\uFFFF]*)/;a.OCParser=function(){a.Parser.call(this,"data-oc",/^([^\s\/\"\'\(\),]+)/,l)};a.OCParser.prototype=a.Parser.prototype;a.ocParser=new a.OCParser;a.OVParser=function(){a.Parser.call(this,"data-ov",/^([._$a-zA-Z\xA0-\uFFFF][._$a-zA-Z0-9\xA0-\uFFFF]*)/,
l)};a.OVParser.prototype=a.Parser.prototype;a.ovParser=new a.OVParser})(p,t,jQuery);(function(c,a,k,h){function l(b,d,a){this.ev=b!==h?b:!1;this.cb=d!==h?d:!1;this.args=a!==h?a:[]}function p(b,d){var a=b.attr("id");if(a===h){var g=b.prop("tagName");g&&(a=g.toLowerCase())}return a===h?h:a+d.split(/\W/).map(function(b){return b.charAt(0).toUpperCase()+b.slice(1)}).join("")}function m(b,a){var f=k.Event(a);f.currentTarget=f.target=b[0];return f}function g(b,d){d.cb||(d.cb=p(b,d.ev));if(!d.cb)throw"Oswin: Callback neither specified nor could it be inferred";
if(d.ev===a.evts.init)d.call(m(b,a.evts.init));else b.on(d.ev+a.evts_ns,function(b){var a=[].slice.call(arguments,1);return d.call(b,a)})}function n(b,a){for(var f=0;f<a.length;f++){var e=a[f];g(b,new l(e.p1,e.p2,e.args))}}l.prototype.setCbFunc=function(b,a){this.cbfunc=b;this.cbthis=a};l.prototype.resolve=function(){!1!==c.config.resolver(this)||c.config.noBuiltins||a.builtins_resolver(this)};l.prototype.call=function(b,d){this.cbfunc===h&&this.resolve();if(this.cbfunc===h)throw"Oswin: Could not find callbak: "+
this.cb;k.isArray(d)?d=d.concat(this.args):d=this.args;c.event=b;c.event.inst=k.data(b.currentTarget,"oswin:inst");a.defProp(c.event,"$target",!0,!0,function(){return k(this.currentTarget)});return this.cbfunc.apply(this.cbthis,d)};var e={};a.builtins=e;a.default_resolver=function(b){var a=c.config.namespace;if("function"!==typeof a&&"object"!==typeof a)throw"Oswin: Invalid namespace";a=c.dotResolve(a,b.cb);if("function"!==typeof a.result)return!1;b.setCbFunc(a.result,a.parent);return b};a.builtins_resolver=
function(b){return b.cb in e?(b.setCbFunc(e[b.cb],c),b):!1};e.$=function(b){var a=[].slice.call(arguments,1);"function"===typeof k.fn[b]?k.fn[b].apply(c.event.$target,a):console.error("Oswin: No such function in jQuery: "+b)};e.css=function(){k.fn.css.apply(c.event.$target,arguments)};e.log=function(){if("console"in window&&"log"in window.console&&!(1>arguments.length))if("apply"in window.console.log&&"function"==typeof window.console.log.apply)window.console.log.apply(window.console,arguments);else{for(var b=
"window.console.log(arguments[0]",a=1;a<arguments.length;a++)b+=",arguments["+a+"]";logfn=new Function("arguments",b+")");logfn(arguments)}};e.alert=function(b){alert(b)};e.focus=function(b){b!==h?"string"===typeof b?k(b).focus():b.focus():c.event.$target.focus()};e.html=function(b,a){var g=!c.config.noAuto;if(!0===a){var e=k.parseHTML(b);c.event.$target.append(e);g&&k(e).oswinBind()}else g&&c.event.$target.html(b).children().oswinBind()};e.trigger=function(b,a){if("string"!==typeof b&&"string"!==
typeof a)throw"Oswin: trigger(): Invalid arguments";var g=[].slice.call(arguments,3);k(a).trigger(b,g)};k.fn.oswinCall=function(b,a){if("string"===typeof b){var g=m(this,"oswin"),e=new l(g.type,b,[].slice.call(arguments,1));e.call(g)}else b instanceof k.Event&&"string"===typeof a&&(e=new l(b.type,a,[].slice.call(arguments,2)),e.call(b));return this};k.fn.oswinBind=function(b){if(b===h){for(var d=0;d<c.config.binds.length;d++){var f=c.config.binds[d][0],e=c.config.binds[d].slice(1);if("string"===typeof f)for(var f=
this.find(f).add(this.filter(f)),m=f.length-1;0<=m;m--){var u=k(f[m]);u.oswinBind.apply(u,e)}}f=this.find("[data-oc]").addBack("[data-oc]");for(d=f.length-1;0<=d;d--)e=k(f[d]),m=a.ocParser.parse(e.attr("data-oc")),n(e,m)}else d=[].slice.call(arguments,1),0<d.length?(f=d.shift(),d=new l(b,f,d),g(this,d)):(d=a.ocParser.parse(b),n(this,d));return this};k.fn.oswinUnbind=function(b){return this.off(b+a.evts_ns)}})(p,t,jQuery);(function(c,a,k,h){function l(a,c,e){this.$node=a;this.access=c;this.accessFunc=
!1;this.args=e}function p(g,c,e){k.data(g[0],"oswin:inst",c);g=g.children();for(var b=0,d=g.length;b<d;b++){$i=k(g[b]);var f=$i.attr("data-ov");if(f){for(var f=a.ovParser.parse(f),h,m=!0,u=0,t=f.length;u<t;u++){var r="."==f[u].p1[0]?e+f[u].p1:f[u].p1;"."==r[0]&&(r=r.substr(1));0==u&&(h=r);"view"==f[u].p2?m=!1:(new l($i,f[u].p2,f[u].args)).addTo(c,r)||(m=!1)}m&&p($i,c,h)}else p($i,c,e)}}Access={display:function(a,c,e,b){if(b===h)return"none"!=this.css("display");b.valueOf()?this.show():this.hide()},
hide:function(a,c,e,b){return!Access.display.call(this,a,c,e,!b.valueOf())},"void":function(a,c,e,b){if(b===h)return null},html:function(a,k,e,b){if(b===h)return this.html();this.html(b);c.config.noAuto||this.oswinBind()},href:function(a,k,e,b){if(b===h)return this.attr("href");if(0==e.length)this.attr("href",b);else{k=e[0];for(var d=[],f=1,l=e.length;f<l;f++)d.push(a.prop(e[f]));d.push(b);this.attr("href",c.argsSubstitute(k,d))}}};l.prototype.clone=function(a){a=new l(a,this.access,this.args);a.accessFunc=
this.accessFunc;this.templates&&(a.templates=this.templates);return a};var m={input:!0,select:!0,textarea:!0,keygen:!0,output:!0};l.prototype.inferAccess=function(a){!0===a.preferVoid?this.access="void":(a=(a=this.$node.prop("tagName"))?a.toLowerCase():h,this.access=m[a]?"val":"text")};l.prototype.resolveAccess=function(a){this.access||this.inferAccess(a);if(Access[this.access]!==h)this.accessFunc=Access[this.access];else if(k.fn[this.access]!==h)this.accessFunc="jQuery";else throw"Oswin: View: No such access function: "+
this.access;};l.prototype.addTo=function(a,c){if(c in a.priv.prop){var e=a.priv.prop[c];this.resolveAccess(e);return e.addViewEle(this)}console.warn("Oswin: View: No such path in model: "+c)};l.prototype.getset=function(a,c,e){return"jQuery"===this.accessFunc?e===h?k.fn[this.access].apply(this.$node,this.args):k.fn[this.access].apply(this.$node,this.args.concat([e])):this.accessFunc.call(this.$node,a,c,this.args,e)};l.prototype.assignID=function(){var c=this.$node.attr("data-ov-id");c===h&&(c=a.uniqueID(),
this.$node.attr("data-ov-id",c));this.id=c;delete this.$node};a.view=function(a,c){var e;if("string"===typeof a){e=k('[data-ov="'+a+'/view"]');if(1>e.length)throw"Oswin: No such view: "+a;if(1<e.length)throw"Oswin: Ambigous view name: "+a;}else e=a;p(e,c,"");return e};a.ViewTemplate=function(a,c){this.prop=a.priv.prop;a.view(c);for(var e in this.prop){var b=this.prop[e];if(b.viewEles)for(var d=b.viewEles.length-1;0<=d;d--)b.viewEles[d].assignID();else delete this.prop[e]}this.html=c.prop("outerHTML");
if(this.html===h)throw"Oswin: View: Could not get element's html source via outerHTML";c.detach()};a.ViewTemplate.prototype.makeNode=function(){return k(k.parseHTML(this.html))};a.ViewTemplate.prototype.makeViewOn=function(a,c){for(var e in this.prop)for(var b=this.prop[e],d=b.viewEles.length-1;0<=d;d--){var f=b.viewEles[d],h=c.find("[data-ov-id="+f.id+"]"),f=f.clone(h);a.priv.prop[e].addViewEle(f,!0);a.priv.prop[e].view()}e=c.find("*").addBack();for(d=e.length-1;0<=d;d--)k.data(e[d],"oswin:inst",
a)};c.setAccessFunc=function(a,c,e){if("string"!==typeof a||"function"!==typeof c)throw"Oswin: view.setAccessFunc(): invalid argument";Access[a]=c;!0===e&&(Access[a].watch=!0)}})(p,t,jQuery);(function(c,a,k,h){function l(a,b,c,d){this.value=a;this.name=b;this.inst=c;d!==h&&(this.parent=d)}function p(){}function m(a,b,c){l.call(this,new p,a,b,c)}function g(a,b,c,d){l.call(this,a.make(),b,c,d);this.value.parent=c;c.priv.mergeNestedProps(this.name,this.value)}function n(a){this.models=a;this.insts=[]}
function e(r,b){var c=new n(r);a.defPrivate(this,c);c.prop=b;var d=this;a.defProp(this,"length",!1,!0,function(){return d.priv.insts.length})}function b(a){this.models=a}function d(a,b,c,d){l.call(this,a.make(this),b,c,d)}function f(){this.prop={}}function q(r){var b=new f;a.defPrivate(this,b);var c=r.priv.config;k.extend(this,c.members);b.factory=r;b.defineData(this,c);for(var d in c.on)this.on(d,c.on[d]);this.ctor&&this.ctor()}function t(){}var u={url:{},data:{},members:{},on:{}},x={POST:!0,GET:!0,
PUT:!0,DELETE:!0};a.Property=l;l.prototype.preferVoid=!1;l.prototype.get=function(){return this.value};l.prototype.set=function(a,b){this.value=a;this.triggerMod();this.view(b)};l.prototype.triggerMod=function(a){if(a===h){a=this.name;var b=this.get();this.inst.trigger("mod",b,a);this.inst.trigger("mod:"+this.name,b,a)}else this.inst.trigger("mod:"+this.name,this.get(),a);this.parent!==h&&this.parent.triggerMod(a)};l.prototype.addViewEle=function(b){var c=this;if("void"!==b.access){this.viewEles===
h?this.viewEles=[b]:this.viewEles.push(b);var d=this.viewEles.length-1;if("val"==b.access||b.accessFunc&&b.accessFunc.watch)b.$node.on("change"+a.evts_ns+" keyup"+a.evts_ns,function(){var a=b.getset(c.inst,c.name);c.get()!=a&&c.set(a,d)});return!0}};l.prototype.view=function(a){if(this.viewEles!==h){var b="viewValue"in this?this.viewValue:this.value,c=this.viewEles.length-1;for(;0<=c;c--)c!==a&&this.viewEles[c].getset(this.inst,this.name,b)}};p.prototype.toJSON=function(){var a={},b;for(b in this)if(this.hasOwnProperty(b)&&
"function"!==typeof this[b]){var c=this[b];a[b]="object"===typeof c&&"function"===typeof c.toJSON?c.toJSON():c}return a};a.inherit(m,l);a.NestedProperty=m;m.prototype.preferVoid=!0;m.prototype.get=function(){return"alt"in this?this.alt:this.value};m.prototype.set=function(a){if("object"!==typeof a)this.alt=a,this.triggerMod(),this.view();else{"alt"in this&&(this.alt=a,this.triggerMod(),this.view(),delete this.alt);for(var b in this.value)b in a&&(this.value[b]=a[b])}};m.prototype.view=function(a){if(this.viewEles!==
h&&"alt"in this)for(var b=this.viewEles.length-1;0<=b;b--)b!==a&&this.viewEles[b].getset(this.inst,this.name,this.alt)};a.inherit(g,l);a.NestedModelProperty=g;g.prototype.preferVoid=!0;g.prototype.get=function(){return this.value.data};g.prototype.set=function(a,b){a instanceof q&&a.priv.factory==this.value.priv.factory?(this.value=a,this.value.parent=this.inst,this.inst.priv.mergeNestedProps(this.name,this.value)):this.value.data=a};g.prototype.addViewEle=function(a){this.value.view(a.$node);return!1};
n.prototype.syncProps=function(b,c){var d;for(d=this.insts.length;d<c;d++)delete b[d];for(d=c;d<this.insts.length;d++)(function(c){a.defProp(b,c,!0,!0,function(){return b.priv.insts[c].data},function(a){b.priv.insts[c].data=a})})(d);this.prop.triggerMod()};n.prototype.templateForModel=function(a){for(var b=this.models.length-1;0<=b;b--)if(this.models[b]==a)return this.colViewEle.templates[b];throw"Oswin: Internal error";};n.prototype.toInstances=function(a,b){for(var c=[].slice.call(b,0,a),d=a,e=
b.length;d<e;d++)c[d]=b[d]instanceof q?b[d]:this.models[0].make(b[d]),c[d].parent=this.prop.inst;return c};n.prototype.syncView=function(a,b,c){for(var d=this.prop.viewEles.length-1;0<=d;d--){var e=this.prop.viewEles[d];if("void"==e.access){for(var f=e.$node.children(),g=0;g<b;g++)k(f[a+g]).detach();for(var f=e.$node.children(),h,g=0;g<c;g++){var l=a+g,m=this.templateForModel(this.insts[l].priv.factory);$j=m.makeNode();0==g?0==l?e.$node.prepend($j):k(f[l-1]).after($j):h.after($j);$j.oswinBind();h=
$j;m.makeViewOn(this.insts[l],$j)}}}this.prop.view()};e.prototype.splice=function(a){var b=this.length,c=[].splice.apply(this.priv.insts,this.priv.toInstances(2,arguments));this.priv.syncProps(this,b);this.priv.colViewEle&&(a>b&&(a=b),0>a&&(a=b+a),0>a&&(a=0),b=arguments.length-2,0>b&&(b=0),this.priv.syncView(a,c.length,b));return c};e.prototype.push=function(){this.splice.apply(this,k.merge([this.length,0],arguments));return this.length};e.prototype.model=function(a){return this.priv.models[a]};e.prototype.instance=
function(a){return this.priv.insts[a]};e.prototype.setData=function(a){if(!c.isArrayLike(a))throw"Oswin: Collection: setData: expected an array-like object";var b=this.length;this.priv.insts=this.priv.toInstances(0,a);this.priv.syncProps(this,b);this.priv.colViewEle&&this.priv.syncView(0,b,this.length)};e.prototype.valueOf=function(){return this.length};e.prototype.toJSON=function(){return this.priv.insts.map(function(a){return a.toJSON()})};b.prototype.make=function(a){return new e(this.models,a)};
c.collection=function(){for(var a=arguments.length-1;0<=a;a--)if(!(arguments[a]instanceof Model))throw"Oswin: Collection: Invalid argument "+a+": Not a Model";return new b([].slice.call(arguments))};a.inherit(d,l);a.CollectionProperty=d;d.prototype.preferVoid=!0;d.prototype.set=function(a,b){this.value.setData(a)};d.prototype.addViewEle=function(b,c){this.viewEles===h?this.viewEles=[b]:this.viewEles.push(b);if("void"==b.access){if(!c){b.templates=[];var d=b.$node.children();if(d.length!=this.value.priv.models.length)throw"Oswin: Collection: Number of view elements and models in collection definition must be the same: "+
this.name;var e=d.length;b.templates.length=e;for(var f=0;f<e;f++){var g=k(d[f]),l=this.value.priv.models[f].make();l.parent=this.inst;b.templates[f]=new a.ViewTemplate(l,g)}}this.value.priv.colViewEle=b;this.value.priv.syncView(0,0,this.value.length);return!1}this.view();return!0};f.prototype.url=function(a,b){var d=this.factory.priv.config.url,d="update"!=a||d[a]?"delete"!=a||d[a]?d[a]:d.read:d.read;if(d===h)throw"Oswin: Model: No URL specified";return c.argsSubstitute(d,b)};f.prototype.defineData=
function(e,f){var h=this;this.data=new m("",e);a.defProp(e,"data",!1,!0,function(){return h.data.get()},function(a){h.data.set(a)});c.dfs(f.data,this.data,function(f,h,k,v){f=f[h];var w=v.name?v.name+"."+h:h,n,p=v;f instanceof Model?(n=new g(f,w,e,v),p=c.dfs.cut()):f instanceof b?(n=new d(f,w,e,v),p=c.dfs.cut()):k?p=n=new m(w,e,v):n=new l(f,w,e,v);e.priv.prop[w]=n;a.defProp(v.get(),h,!1,!0,function(){return n.get()},function(a){n.set(a)});return p})};f.prototype.mergeNestedProps=function(a,b){var c=
b.priv.prop;a+=".";for(var d in c)this.prop[a+d]&&this.prop[a+d].viewEles&&(c[d].viewEles=this.prop[a+d].viewEles,c[d].view()),this.prop[a+d]=c[d]};q.prototype.sync=!1;q.prototype.ctor=function(a){a&&(this.data=a)};q.prototype.sendData=function(){return{data:c.filterUnderscore(this.toJSON())}};q.prototype.recvData=function(a){"object"===typeof a&&(this.data=a)};q.prototype.create=function(){var a=this.priv.url("create",arguments);return this.priv.factory.sync(this,a,"POST")};q.prototype.get=function(){var a=
this.priv.url("read",arguments);return this.priv.factory.sync(this,a,"GET")};q.prototype.update=function(){var a=this.priv.url("update",arguments);return this.priv.factory.sync(this,a,"PUT")};q.prototype["delete"]=function(){var a=this.priv.url("delete",arguments);return this.priv.factory.sync(this,a,"DELETE")};q.prototype.prop=function(a,b){if("."==a[0]&&"."==a[1]){if(this.parent===h)throw"Oswin: No parent model instance set. Property requested: "+a;return this.parent.prop(a.slice(2),b)}if(!(a in
this.priv.prop))throw"Oswin: Model: No such property: "+a;if(b===h)return this.priv.prop[a].get();this.priv.prop[a].set(b)};q.prototype.view=function(b){this.priv.$view=a.view(b,this);for(var c in this.priv.prop)this.priv.prop[c].view()};q.prototype.$=function(a){if(a===h)return this.priv.$view;var b=k([]);ves=this.priv.prop[a].viewEles;if(ves===h)return b;a=0;for(var c=ves.length;a<c;a++)b.push(ves[a].$node[0]);return b};q.prototype.toJSON=function(){return this.data.toJSON()};a.asEvented(q.prototype);
t.prototype.sync=function(a,b,c){if(!(c in x))throw"Oswin: sync: undefined operation: "+c;if(a.sync)return console.warn("Model Instance is already performing a sync operation, aborting..."),!1;var d=h,e="application/json";if("POST"===c||"PUT"===c){var f=a.sendData(),d=f.data;"contentType"in f&&(e=f.contentType)}b=k.ajax({complete:function(b,c){a.sync=!1;a.trigger("status",c,b)},contentType:e,data:d,dataType:"json",success:function(b){a.recvData(b)},type:c,url:b});a.sync=!0;a.trigger("status","start",
b);return b};Model=function(b){var c=new t;a.defPrivate(this,c);c.config=k.extend(!0,{},u,b)};Model.prototype.make=function(){var a=new q(this);a.ctor.apply(a,arguments);return a};Model.prototype.sync=function(a,b,c){return this.priv.sync(a,b,c)};c.localSync=function(a,b,d){if(!(d in x))throw"Oswin: sync: undefined operation: "+d;if(!c.haveLocalStorage())return console.error("Oswin: localSync(): HTML5 Local Storage not available"),!1;if("POST"===d||"PUT"===d)try{localStorage[b]=JSON.stringify(a.sendData().data)}catch(e){return console.error("Oswin: Exception in localSync(), probably because Local Storage quota was exceeded"),
!1}else if("GET"===d){if(!(b in localStorage))return!0;try{a.recvData(JSON.parse(localStorage[b]))}catch(f){return console.error("Oswin: localSync(): Malformed data"),!1}}else"DELETE"===d&&b in localStorage&&delete localStorage[b];return!0};c.model=function(a){return new Model(a)}})(p,t,jQuery);(function(c,a,k,h){a.evts={init:"init",ajax:"oswin:ajax"};a.evts_ns=".oswin";a.navigating=!1;c.config=k.extend({},{namespace:window,noAuto:!1,noBuiltins:!1,binds:[],resolver:a.default_resolver});k(function(){k(window).on("beforeunload",
function(){a.navigating=!0});k(document).oswinBind()})})(p,t,jQuery);return p});
